<%- include('../partials/header') %>

<main class="max-w-7xl mx-auto p-6">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold text-indigo-700 mb-6">ðŸŽµ All Instruments</h1>
        <a href="/items/new" class="inline-block bg-indigo-600 text-white px-4 py-2 rounded mb-6 hover:bg-indigo-700">âž• Add New Instrument</a>
    </div>

  <% if (items.length === 0) { %>
    <p class="text-gray-600">No items found. Add some instruments!</p>
  <% } else { %>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <% items.forEach(item => { %>
        <div class="bg-white p-4 rounded-xl shadow hover:shadow-lg transition">
          <% if (item.image_url) { %>
            <img src="<%= item.image_url %>" alt="<%= item.name %>" class="rounded-lg w-full h-48 object-cover mb-3" />
          <% } %>
          <h2 class="text-xl font-semibold text-indigo-700"><%= item.name %></h2>
          <p class="text-sm text-gray-600"><%= item.brand %> â€¢ <%= item.category_name %></p>
          <p class="text-gray-800 font-semibold mt-2">à§³ <%= item.price %></p>
          <p class="text-sm text-gray-500">In stock: <%= item.quantity %></p>
          <div class="mt-4 flex justify-between text-sm">
            <a href="/items/<%= item.id %>" class="text-indigo-600 hover:underline">View</a>
            <a href="/items/<%= item.id %>/edit" class="text-yellow-600 hover:underline">Edit</a>
            <!-- <form action="/items/<%= item.id %>/delete" method="POST""> -->
              <button
                type="button"
                onclick="showPasswordModal('<%= item.id %>')"
                class="text-red-600 hover:underline"
              >
                Delete
              </button>
            <!-- </form> -->
          </div>
        </div>
        <!-- ðŸ”’ Hidden Delete Form -->
        <form id="delete-form-<%= item.id %>" action="/items/<%= item.id %>/delete" method="POST" class="hidden">
          <input type="hidden" name="adminPassword" id="adminPassword-<%= item.id %>">
        </form>
      <% }) %>
    </div>
  <% } %>
</main>


<%- include('../partials/footer') %>
